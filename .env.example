# Session Hub Environment Configuration
# Copy this to .env and configure for your environment

# ============================================
# Docker Deployment (when running via docker-compose)
# ============================================
# Password for PostgreSQL (change in production!)
POSTGRES_PASSWORD=sessionhub_dev_password

# Host path for persistent data (cloned repos, worktrees, SSH keys)
# Use a named volume (default) or a host path for persistence
# Named volume: session-hub-data (default, managed by Docker)
# Host path:    /path/to/session-hub-data (data visible on host)
HOST_DATA_PATH=session-hub-data

# Host path to existing git repositories (for local/symlinked repos)
HOST_REPO_PATH=/path/to/your/repos

# Host SSH directory (for Proxmox backend)
HOST_SSH_PATH=~/.ssh

# External port mappings (optional)
# PORT=3000
# POSTGRES_PORT=5432

# ============================================
# Database
# ============================================
# When running in Docker, use: postgresql://sessionhub:${POSTGRES_PASSWORD}@postgres:5432/sessionhub
# When running locally, use: postgresql://sessionhub:sessionhub_dev_password@localhost:5432/sessionhub
DATABASE_URL=postgresql://sessionhub:sessionhub_dev_password@localhost:5432/sessionhub

# Server
PORT=3000
NODE_ENV=development

# Authentication
AUTH_SECRET=change-this-to-a-secure-random-string-in-production

# Git Configuration
# Path to the base git repository that worktrees will branch from
BASE_REPO_PATH=/path/to/your/project

# Path where worktrees will be created (should be outside BASE_REPO_PATH)
WORKTREE_BASE_PATH=/tmp/session-hub-worktrees

# ============================================
# Container Backend Selection
# ============================================
# 'docker' or 'proxmox'
CONTAINER_BACKEND=docker

# ============================================
# Docker Configuration (if CONTAINER_BACKEND=docker)
# ============================================
DOCKER_SOCKET=/var/run/docker.sock
CLAUDE_IMAGE=session-hub/claude-instance:latest

# Optional: Container resource limits
CONTAINER_MEMORY_LIMIT=2g
CONTAINER_CPU_LIMIT=2

# ============================================
# Proxmox Configuration (if CONTAINER_BACKEND=proxmox)
# ============================================
# Proxmox server connection
# PROXMOX_HOST=192.168.1.10
# PROXMOX_PORT=8006

# API Token authentication (create in Proxmox: Datacenter > Permissions > API Tokens)
# Format: user@realm!tokenid
# PROXMOX_TOKEN_ID=root@pam!session-hub
# PROXMOX_TOKEN_SECRET=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Proxmox node name
# PROXMOX_NODE=pve

# Storage for LXC containers
# PROXMOX_STORAGE=local-lvm

# Network configuration
# PROXMOX_BRIDGE=vmbr0
# PROXMOX_VLAN_TAG=2

# SSH access to containers (kobozo user is created in the template)
# PROXMOX_SSH_USER=kobozo
# PROXMOX_SSH_PRIVATE_KEY_PATH=/home/devops/.ssh/id_ed25519

# Container resources
# PROXMOX_MEMORY_MB=2048
# PROXMOX_CORES=2

# Path to Claude config on Proxmox host (for LXC bind mount)
# PROXMOX_CLAUDE_CONFIG_PATH=/root/.claude

# NOTE: Template VMID and workspace VMIDs are now managed in the UI:
# Settings > Proxmox Template - Configure starting VMID (default: 500)
# Template uses starting VMID, workspaces use sequential VMIDs (501, 502, ...)

# ============================================
# Session settings
# ============================================
SESSION_IDLE_TIMEOUT_MINUTES=60
OUTPUT_BUFFER_SIZE=1000
